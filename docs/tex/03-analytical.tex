\chapter{Аналитическая часть}

\section{Одежда, как объект физического мира}

Любая одежда: футболки, брюки, носки, шарфы и куртки и т.~д., --- представляeт
собой одну или несколько соединенных между собой деталей из ткани. Ткань, в
свою очередь, состоит из натуральных или искусственных волокон или нитей,
которые производятся путем прядения различных материалов (рисунок \ref{fig:fibers}),
таких как шерсть, хлопок, лен~и~т.~п.
Для соединения полученных волокон используют следующие техники:
\begin{itemize}[left=\parindent]
    \item ткачество --- изготовление ткани путем переплетения нитей под прямым
        углом (рисунок \ref{subimg:wrap});
    \item вязание --- соедение волокон между собой путем образования и
        протягивания петель (рисунок \ref{subimg:knit});
    \item макраме --- закрепление нитей с помощью узлов (рисунок \ref{subimg:makrame});
    \item прессование волокон животных (получение войлока) (рисунок \ref{subimg:felt}).
\end{itemize}
После применения одной из этих техник получается готовая ткань.

~\\
\begin{figure}[ht!]
    \vspace{-4ex}
    \centering
    \subimg{25mm}{img00.jpg}{wool}
    \hspace{4ex}
    \subimg{25mm}{img01.jpg}{cotton}
    \hspace{4ex}
    \subimg{25mm}{img02.jpg}{linen}
    \caption{Виды волокон: 
             \subref{subimg:wool} шерсть,
             \subref{subimg:cotton} хлопок,
             \subref{subimg:linen} лен}
    \label{fig:fibers}
\end{figure}

\begin{figure}[ht!]
    \vspace{-4ex}
    \centering
    \subimg{50mm}{img03.jpg}{wrap}
    \hspace{4ex}
    \subimg{50mm}{img04.jpg}{knit}
    \vfill
    \hspace{4ex}
    \subimg{50mm}{img05.jpg}{makrame}
    \hspace{4ex}
    \subimg{50mm}{img06.jpg}{felt}
    \caption{Техники соединения волокон:
             \subref{subimg:wrap} ткачество,
             \subref{subimg:knit} вязание,~\\
             \subref{subimg:makrame} макраме,
             \subref{subimg:felt} войлок
            }
    \label{fig:getCloth}
\end{figure}

Разные волоконные материалы и техники их соединения являются причиной
различной степени проявления разными тканями основных механических свойств:
растяжения, сдвига и изгиба. Отсутвие у тканных материалов упругих
свойств приводит к образованию складок и легком драпировании на другие
объекты. Таким образом, разное строение ткани в зависимости от типа волокон,
большое количество узлов, из которых она состоит, разные
степени проявления механических свойств, большое количество степеней свободы -- все это
создает сложности при моделировании ткани. Поэтому существуют и разрабатываются
методы визуализации ткани, отвечающие различным требованиям: одни работают
быстро, но получаемые ими изображения менее реалистичны, другие создают
реалистичное изображение, что требуют бóльших затрат по времени. Поэтому
при решении задачи визуализации ткани часто приходится делать выбор
между скоростью и реалистичностью \cite{bib11}.

\section{Методы визуализации одежды}

Как уже было сказано выше, одежда является более сложной формой ткани,
поэтому далее будут рассмотрены методы моделирования тканных материалов.
Данные методы можно разделить на два основных типа:
\begin{itemize}[left=\parindent]
    \item геометрические методы;
    \item физические методы.
\end{itemize}

\subsection{Геометрические методы}

Геометрические методы не учитывают физические свойства ткани, они фокусируются
на воспроизведении внешнего вида тканных материалов с помощью представления
поверхности математическими функциями. Таким образом, в данных методах не
требуется решение сложных систем уравнений, что дает им преимущество в виде
большой скорости выполнения \cite{bib07}.

Хотя геометрические методы за короткое время могут с достаточной долей
реалистичности визуализировать ткань, каждый из них либо решает достаточно
специфическую задачу, например, воспроизведение висящей ткани или моделирование
складок на рукаве, либо нуждается в активном содействии пользователя, что
уменьшает количество сфер, в которых их можно применить \cite{bib07}.

Геометрическими методами являются:
\begin{itemize}[left=\parindent]
    \item метод моделирования свисающей ткани \cite{bib08};

        Данный метод предназначен для моделирования тканного материала, который
        закреплен на некотором количестве точек. Ткань считается прямоугольной
        и представляется в виде сетки, а моделирование выполняется в два этапа:
        \begin{enumerate}[label=\arabic*)]
            \item На первом этапе каждая пара заданных точeк соединяется цепной
                (catenary) кривой, представленной формулой:
                $$y = a\cosh(\frac{x}{a}),$$
                где a --- коэффициент масштабрирования. Если при этом проекции
                двух кривых на плоскость $XOZ$ пересекаются как показано на
                рисунке \ref{img:Weil}, то для устранения дополнительных
                вычислений, нижняя кривая удаляется. После заверешения этого
                этапа модель представляет изогнутый каркас, форма которого
                только приближается к структуре ткани. 
                \img{5cm}{img07.jpg}{Две пересекающиеся цепные кривые}{Weil}
            \item Для получения более точной модели добавляются новые
                поверхности, которые создаются путем разделения треугольников,
                образованных цепными кривыми, вычисленных на предыдущем этапе.
                Новые треугольники также разделяются. Итерационный процесс
                продолжается до тех пор, пока максимальное смещение точек сетки
                за один проход не станет меньше заданного значения.
        \end{enumerate}
        После завершения двух этапов полученная модель визуализируется с
        предварительным нанесением на нее сплайновый кривых для получения
        гладкого изобажения ткани\cite{bib08}\cite{bib07}.

    \item метод моделирования складок на рукаве \cite{bib07};

        Данный метод ориентирован под конкретную задачу, а именно моделирование
        рукава на сгибающейся руке. Ткань представляется в виде полого
        цилиндра, состоящего из набора окружностей $R_i$ (рисунок
        \ref{subimg:Agui01}). Складки образуются в том случае, если модуль
        разности расстояний между точками двух соседних окружностей
        до ($L_0$) и после ($L(i,j)$) деформации (рисунки \ref{subimg:Agui02}
        --~ \ref{subimg:Agui03}) стремиться к минимуму\cite{bib07}.
        ~\\
        \begin{figure}[ht!]
            \vspace{-4ex}
            \centering
            \subimg{30mm}{img08.jpg}{Agui01}
            \hspace{2ex}
            \subimg{35mm}{img09.jpg}{Agui02}
            \hspace{2ex}
            \subimg{35mm}{img10.jpg}{Agui03}
            \caption{Модель рукава: 
                 \subref{subimg:Agui01} полый цилиндр из набора~окружностей;\\
                 \subref{subimg:Agui02} соседние окружности до деформации;
                 \subref{subimg:Agui03} соседние окружности после деформации}
            \label{fig:Agui}
        \end{figure}


    \item методы со значительной степенью вмешательства пользователя
        \cite{bib09}\cite{bib10}.

        Данные методы разрабатывались специально под графические редакторы.
        Основная их идея состоит в том, чтобы изначально представить одежду
        как полностью прилегающую к телу или расположенную на небольшом 
        расстоянии с повторением контуров тела, а далее предоставить пользователю
        интерфейс для редактирования положения ткани. Так как в данных методах
        реалистичность итового изображения во многом зависит от пользователя,
        а в этой работе ставится задача получения реалистичного изображения без
        его вмешательства, более подробное описание этих методов здесь не
        дается.

\end{itemize}

\subsection{Физические методы}

В физических методах модель ткани представляют в виде  треугольных или
прямоугольных сеток с точечными массами в узлах. Взаимодействие между этими
массами  описываются различными способами в зависимости от метода. В моделях,
основанных на энергии, положение точки определяется энергетическим состоянием
системы, а именно: ищется такое состояние ткани, в котором энергия системы
минимальна. В других моделях силы взаимодействия между точечными массами
описываются дифференциальными уравнениями, решение которых производится с
помощью численного интегрирования, в результате чего получают координаты точки.
\cite{bib07}

Так как в физических методах проводится большое количество вычислений: решение
системы дифференциальных уравнений или перебор состояний системы для поиска
минимумов энергии, --- скорость их выполнения ниже, чем у геометрических
методов. Однако физические методы предоставляют большую свободу: мы можем
создать реалистичное изображение без привлечения пользователя, а также можем
смоделировать разные виды ткани, изменяя физические характеристики (например,
увеличение значения массы в узлах приведет к утяжелению ткани), что также
позволяет сделать модель более правдоподобной. \cite{bib07}

Основными физическими моделями являются \cite{bib11}:
\begin{itemize}[left=\parindent]
    \item модель сплошной среды (Continuum Model) \cite{bib12};

        В данной модели ткань рассматривается в виде сплошной, однородной
        структуры. Её поведение моделируется с помощью теории упругости, из
        физически обоснованных выражений которой выводится большая система
        обыкновенных дифференциальных уравнений. Решение этой системы
        производится численно. Такой подход позволяет модели естественным
        образом реагировать на приложенные силы, окружающую среду и другие
        объекты, однако требует дорогих вычислительных затрат
        \cite{bib15}\cite{bib12}.

    \item энергетическая модель систем частиц (Energy-Based Particle Systems Model) \cite{bib13};

        статическая

    \item массо-пружинная модель (Mass-Spring Model) \cite{bib14}.

        То, что надо и инфы много

\end{itemize}

\section{Объекты синтезируемой сцены}
% \section{Методы разрешения пересечений и самопересечений}

% Предполагается пересечение с торсом + складки, поэтому надо добавить, возможно
% впишется в предыдущий раздел Может быть, надо где-то описать методы соединения
% деталей одежды

\section{Существующие программные обеспечения}

Готовое ПО + какие методы использованы

\section{Вывод}

Обосновать выбор Mass-Spring Model
